# src/generation/prompt_template.py

def create_legal_prompt(question: str, context: str) -> str:
    """
    پرامپت نهایی را برای ارسال به LLM بر اساس قالب سخت‌گیرانه ایجاد می‌کند.
    """
    template = f"""
شما یک دستیار حقوقی-پژوهشی هستید. وظیفه شما پاسخ دادن به سوال کاربر فقط و فقط بر اساس متون ارائه شده است.

**دستورالعمل‌های دقیق:**
1.  تمام متون قانونی زیر را با دقت بخوان.
2.  به دنبال جملات و بخش‌هایی بگرد که مستقیماً به «{question}» پاسخ می‌دهند.
3.  تمام اطلاعات مرتبطی که پیدا کردی را جمع‌بندی کرده و در قالب یک پاسخ منسجم و روان ارائه بده.
4.  در پاسخ خود، حتماً به شماره سند ارجاع بده. (مثلاً: بر اساس اطلاعات سند شماره ۱، ...)
5.  اگر پاسخ صریح به سوال در متون یافت نشد، فقط و فقط بنویس: "پاسخ دقیق به این سوال در مستندات ارائه شده یافت نشد."
6.  مطلقاً هیچ اطلاعاتی خارج از متون زیر اضافه نکن و از دانش قبلی خود استفاده نکن.

---
**سوال کاربر:**
{question}
---
**متون قانونی مرتبط (Context):**
{context}
---
**پاسخ دقیق و مستند شما بر اساس دستورالعمل:**
"""
    return template.strip()